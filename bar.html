<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Profile â€” Revisi (avatar + gender + theme)</title>
  <style>
    :root{
      --page-bg: #ffeef0;        /* default pink-ish */
      --panel: #ffffff;
      --muted: #6b6b6b;
      --accent-pink: #ffbfc6;
      --accent-blue: #cfe9ff;
      --shadow: 0 12px 40px rgba(10,10,20,0.10);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    html,body{height:100%;}
    body{
      margin:0;
      background:var(--page-bg);
      min-height:100vh;
      transition:background 220ms ease;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* background icons */
    .bg-icon{
      position:fixed; z-index:40; background:transparent; border:none; padding:0; margin:0; display:flex; align-items:center; justify-content:center; cursor:pointer;
    }
    .bg-icon.left{left:20px; top:20px}
    .bg-icon.right{right:20px; top:20px}
    .bg-icon img{display:block; width:20px; height:20px}
    .bg-icon:focus{outline:none}

    /* card */
    .card{
      width:76%; max-width:980px; min-width:520px;
      background:var(--panel);
      position:fixed; left:50%; bottom:0; transform:translateX(-50%);
      padding:56px 56px 64px; box-sizing:border-box; z-index:30;
      border-radius:20px 20px 34px 34px; box-shadow:var(--shadow);
      margin-bottom:-6px;
    }

    /* ---------- Avatar: big full circle with image perfectly filling it ---------- */
    .avatar-wrap{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:-110px;                 /* place above card */
      width:220px;                /* outer circle size */
      height:220px;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:60;
      pointer-events:none;        /* clicks go to label inside */
    }

    /* outer white disk (background circle) */
    .avatar-disk{
      width:220px;
      height:220px;
      border-radius:50%;
      background:var(--panel);   /* white disk */
      box-shadow: 0 22px 48px rgba(0,0,0,0.10);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      overflow:visible;          /* allow badge overflow */
    }

    /* the actual image fills the disk exactly with no gap */
    .avatar-img{
      width:220px;
      height:220px;
      border-radius:50%;
      object-fit:cover;
      display:block;
      box-shadow: none;
      border: none;
      pointer-events:auto;
    }

    /* edit badge: overlap to edge, rapat */
    .edit-badge{
      position:absolute;
      right:-12px;      /* sedikit menjorok keluar agar terlihat menempel */
      bottom:-12px;
      width:64px;
      height:64px;
      border-radius:50%;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:18px;
      border:6px solid rgba(255,255,255,0.95);
      cursor:pointer;
      box-shadow:0 12px 28px rgba(0,0,0,0.12);
      z-index:80;
      pointer-events:auto;
      transition: transform 160ms ease, box-shadow 160ms ease;
    }
    .edit-badge img { width:34px; height:34px; display:block; }

    .edit-badge:hover{ transform: translateY(-4px); }

    /* layout */
    .grid{display:grid; grid-template-columns:1fr 300px; gap:28px; align-items:start}
    label{display:block; font-size:13px; color:var(--muted); margin-bottom:8px}
    input[type=text], input[type=date], input[type=email], select {
      width:100%; padding:10px 12px; border-radius:8px; border:1px solid #e7e7e7; outline:none; background:transparent; font-size:14px; box-sizing:border-box; margin-bottom:16px;
    }

    .date-display { font-size:13px; color:#333; margin-top:-12px; margin-bottom:12px; }

    .theme-box{padding:8px 18px; border-radius:12px; display:flex; flex-direction:column; align-items:center; gap:16px}
    .swatches{display:flex; gap:16px; align-items:center}
    .swatch{
      width:48px; height:48px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; border:4px solid transparent;
      transition: transform 160ms ease, box-shadow 160ms ease;
    }
    .swatch.pink{background:var(--accent-pink)}
    .swatch.blue{background:var(--accent-blue)}
    .swatch.selected{ box-shadow:0 12px 30px rgba(0,0,0,0.12); transform: scale(1.18); border-color:#fff; }

    .controls{display:flex; gap:12px; align-items:center; margin-top:6px}
    .btn{padding:8px 18px; border-radius:999px; border:none; cursor:pointer; font-weight:600}
    .btn.cancel{background:#fff; border:1px solid #e6e6e6}
    /* default save (normal) */
    .btn.save{background:linear-gradient(180deg,#ffd7dc,#ffbfc6); color:#111; padding:8px 18px; font-size:14px}

    /* when theme is pink: make save button BIGGER and more prominent */
    .theme-pink .btn.save{
      padding:14px 28px;
      font-size:16px;
      background:linear-gradient(180deg,#ffb6c0,#ff98a6);
      box-shadow: 0 16px 36px rgba(255,105,145,0.12);
    }

    /* when theme is blue: adjust background variable just in case */
    .theme-blue .btn.save{
      padding:10px 22px;
      font-size:15px;
      background:linear-gradient(180deg,#d9f0ff,#bfe9ff);
      box-shadow: 0 12px 30px rgba(50,120,200,0.08);
    }

    .error { color: #b00020; font-size:13px; margin-top:-8px; margin-bottom:12px; display:none; }

    @media (max-width:1000px){
      .card{width:92%; min-width:0; padding:28px}
      .grid{grid-template-columns:1fr}
      .avatar-wrap{left:28px; transform:none; top:-88px}
      .avatar-disk, .avatar-img { width:160px; height:160px; }
      .edit-badge{ right:-10px; bottom:-10px; width:52px; height:52px; border:5px solid rgba(255,255,255,0.95); }
    }

    .avatar-wrap,
.avatar-disk,
.avatar-img {
  width:160px;
  height:160px;
}

.edit-badge {
  width:10px;
  height:10px;
  right:-4px;
  bottom:-4px;
}

  </style>
</head>
<body>
  <!-- background icons (no visible box) -->
<!-- tombol kiri: kembali -->
<!-- Tombol kiri: kembali ke halaman lain -->
<a href="./profil.html" class="bg-icon left" title="Kembali">
  <img src="assets/balik.png" alt="back">
</a>

<!-- Tombol kanan: menuju halaman bantuan -->
<a href="help.html" class="bg-icon right" title="Help">
  <img src="assets/nanya.png" alt="help">
</a>



  <div class="card" role="region" aria-label="Profile card">
    <!-- Avatar area (full disk + image fills it) -->
    <div class="avatar-wrap" aria-hidden="false">
      <div class="avatar-disk" role="img" aria-label="User avatar disk">
        <label for="avatarInput" style="width:100%; height:100%; border-radius:50%; display:block; cursor:pointer; pointer-events:auto;">
          <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=400&auto=format&fit=crop&crop=faces"
               alt="avatar"
               class="avatar-img"
               id="avatarPreviewImg">
        </label>

        <!-- badge overlaps edge and is clickable -->
        <button id="editBadge" class="edit-badge" title="Edit avatar">
          <img src="assets/pen.png" alt="edit">
        </button>
      </div>
    </div>

    <div style="height:12px"></div>

    <div class="grid">
      <div class="form">
        <form id="profileForm" onsubmit="return false;" novalidate>
          <div style="margin-top:12px">
            <label for="name">Name:</label>
            <input id="name" name="name" type="text" value="Clarissa" required />
            <div class="error" id="err-name">Nama wajib diisi.</div>

            <!-- GENDER: select dropdown with three options -->
            <label for="gender">Gender:</label>
            <select id="gender" name="gender" required>
              <option value="">-- Pilih gender --</option>
              <option value="laki">Laki-laki</option>
              <option value="perempuan">Perempuan</option>
              <option value="mental">Mental ill</option>
            </select>
            <div class="error" id="err-gender">Pilih gender (Laki-laki, Perempuan, atau Mental Ill).</div>

            <!-- BIRTH: date -->
            <label for="birth">Birth Date:</label>
            <input id="birth" name="birth" type="date" required />
            <div class="date-display" id="birthDisplay" aria-live="polite"></div>
            <div class="error" id="err-birth">Tanggal lahir wajib dipilih.</div>

            <label for="email">Email</label>
            <input id="email" name="email" type="email" value="clarissaishere@gmail.com" required />
            <div class="error" id="err-email">Masukkan email yang valid.</div>

            <label for="phone">Phone Number:</label>
            <input id="phone" name="phone" type="text" value="+62-888-2222" />
            <div class="error" id="err-phone">Nomor telepon wajib diisi.</div>
          </div>
        </form>
      </div>

      <aside class="theme-box" aria-label="Theme and actions">
        <div style="font-weight:700;color:#333">Theme</div>
        <div class="swatches" role="list">
          <div class="swatch pink selected" data-theme="pink" title="Pink" role="listitem" tabindex="0"></div>
          <div class="swatch blue" data-theme="blue" title="Blue" role="listitem" tabindex="0"></div>
        </div>

        <div class="controls">
          <button class="btn cancel" id="cancelBtn" type="button">Cancel</button>
          <button class="btn save" id="saveBtn" type="button">Save</button>
        </div>
      </aside>
    </div>
  </div>

  <input id="avatarInput" type="file" accept="image/*" style="display:none">

  <script>
    // elements
    const avatarInput = document.getElementById('avatarInput');
    const avatarImg = document.getElementById('avatarPreviewImg');
    const editBadge = document.getElementById('editBadge');
    const helpBtn = document.getElementById('helpBtn');
    const swatches = document.querySelectorAll('.swatch');
    const root = document.documentElement;

    // open file picker from badge or avatar
    editBadge.addEventListener('click', () => avatarInput.click());
    document.querySelector('.avatar-disk label').addEventListener('click', () => avatarInput.click());

    avatarInput.addEventListener('change', (e) => {
      const file = e.target.files && e.target.files[0];
      if (!file) return;
      if (!file.type.startsWith('image/')) { alert('Pilih file gambar.'); return; }
      const reader = new FileReader();
      reader.onload = function(evt) {
        avatarImg.src = evt.target.result;
        try { localStorage.setItem('profileAvatar', evt.target.result); } catch (ex) {}
      }
      reader.readAsDataURL(file);
    });

    // load saved avatar
    const savedAvatar = localStorage.getItem('profileAvatar');
    if (savedAvatar) avatarImg.src = savedAvatar;

    // theme selection
    function applyTheme(theme) {
      document.body.classList.remove('theme-pink','theme-blue');
      if (theme === 'pink') {
        document.body.classList.add('theme-pink');
        document.documentElement.style.setProperty('--page-bg','#ffeef0');
      } else if (theme === 'blue') {
        document.body.classList.add('theme-blue');
        document.documentElement.style.setProperty('--page-bg','#dff3ff');
      }
      document.body.style.background = getComputedStyle(document.documentElement).getPropertyValue('--page-bg');
    }

    swatches.forEach(s => {
      s.addEventListener('click', () => {
        swatches.forEach(x => x.classList.remove('selected'));
        s.classList.add('selected');
        applyTheme(s.dataset.theme);
      });
      s.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); s.click(); }
      });
    });

    // pre-select default (pink)
    applyTheme(document.querySelector('.swatch.selected').dataset.theme);

    // cancel animation
    document.getElementById('cancelBtn').addEventListener('click', () => {
      const card = document.querySelector('.card');
      card.animate([
        { transform: 'translateX(-50%) translateY(0)' },
        { transform: 'translateX(-50%) translateY(-8px)' },
        { transform: 'translateX(-50%) translateY(0)' }
      ], { duration: 300 });
    });

    // save with validation
    document.getElementById('saveBtn').addEventListener('click', () => {
      // clear errors
      document.querySelectorAll('.error').forEach(e => e.style.display='none');

      const name = document.getElementById('name').value.trim();
      const gender = document.getElementById('gender').value;
      const birth = document.getElementById('birth').value;
      const emailEl = document.getElementById('email');
      const phone = document.getElementById('phone').value.trim();

      let ok = true;
      if (!name) { document.getElementById('err-name').style.display='block'; ok = false; }
      if (!gender) { document.getElementById('err-gender').style.display='block'; ok = false; }
      if (!birth) { document.getElementById('err-birth').style.display='block'; ok = false; }
      if (!emailEl.checkValidity()) { document.getElementById('err-email').style.display='block'; ok = false; }

      if (!ok) {
        createToast('Lengkapi field yang wajib.', true);
        return;
      }

      // save to localStorage
      try {
        const profile = { name, gender, birth, email: emailEl.value.trim(), phone };
        localStorage.setItem('profileData', JSON.stringify(profile));
      } catch (e) {}

      createToast('Profile saved (lokal)');
    });

    function createToast(msg, isError = false) {
      const toast = document.createElement('div');
      toast.textContent = msg;
      toast.style.position='fixed';
      toast.style.bottom='32px';
      toast.style.left='50%';
      toast.style.transform='translateX(-50%)';
      toast.style.padding='10px 16px';
      toast.style.borderRadius='12px';
      toast.style.boxShadow='0 8px 30px rgba(0,0,0,0.12)';
      toast.style.background=isError ? '#ffeef0' : 'white';
      toast.style.color=isError ? '#b00020' : '#111';
      toast.style.zIndex = 9999;
      document.body.appendChild(toast);
      setTimeout(()=> toast.style.opacity = '0', 900);
      setTimeout(()=> toast.remove(), 1200);
    }

    // date display
    const birthInput = document.getElementById('birth');
    const birthDisplay = document.getElementById('birthDisplay');
    function updateBirthDisplay(){
      if (!birthInput.value) { birthDisplay.textContent = ''; return; }
      const d = new Date(birthInput.value + 'T00:00:00');
      const opts = { year: 'numeric', month:'long', day:'numeric' };
      birthDisplay.textContent = 'Dipilih: ' + d.toLocaleDateString('id-ID', opts);
    }
    birthInput.addEventListener('change', updateBirthDisplay);

    // load saved profile if any
    const savedProfile = localStorage.getItem('profileData');
    if (savedProfile) {
      try {
        const p = JSON.parse(savedProfile);
        if (p.name) document.getElementById('name').value = p.name;
        if (p.gender) document.getElementById('gender').value = p.gender;
        if (p.birth) { document.getElementById('birth').value = p.birth; updateBirthDisplay(); }
        if (p.email) document.getElementById('email').value = p.email;
        if (p.phone) document.getElementById('phone').value = p.phone;
      } catch (e) {}
    }

    // help button (example: go to help.html)
    helpBtn.addEventListener('click', () => {
      window.location.href = 'help.html';
    });
  </script>
</body>
</html>
