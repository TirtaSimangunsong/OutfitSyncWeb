<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sidebar Panel dengan Spotlight (Final)</title>
<style>
  :root{
    --bg: #faf6f4;
    --capsule: #e9a2a4;
    --panel: #f4d8da;
    --shadow-strong: 0 18px 30px rgba(0,0,0,0.08);
    --shadow-soft: 0 8px 18px rgba(0,0,0,0.06);

    /* posisi dan jarak */
    --wrap-left: 20px;
    --wrap-top: 20px;

    /* jarak antara kapsul & panel */
    --panel-overlap: -16px;

    /* ukuran ikon & jarak antar item */
    --spot-size: 62px;
    --gap: 26px;
  }

  html,body{
    height:100%;
    margin:0;
    background:var(--bg);
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  .sidebar-wrap{
    position:fixed;
    left:var(--wrap-left);
    top:var(--wrap-top);
    display:flex;
    flex-direction:column;
    align-items:flex-start;
    z-index:80;
  }

  /* tombol CS */
  .capsule{
    display:inline-flex;
    align-items:center;
    gap:10px;
    padding:12px 20px;
    background: linear-gradient(180deg, var(--capsule), #e8a7a9);
    color:white;
    font-weight:700;
    border-radius:20px;
    box-shadow: var(--shadow-strong);
    cursor:pointer;
    user-select:none;
    position:relative;
    z-index:100;
    transition: transform 200ms ease;
  }
  .capsule:active{ transform: translateY(2px) scale(.997); }

  .capsule .chev{
    width:16px;
    height:16px;
    transform-origin:center;
    transition: transform 240ms ease;
  }
  .capsule.open .chev{ transform: rotate(180deg); }

  /* panel isi logo */
  .panel{
    width: 92px;
    background: linear-gradient(180deg, var(--panel), #f6dcde);
    border-radius: 18px;
    box-shadow: var(--shadow-soft);
    padding: 24px 12px;
    margin-top: var(--panel-overlap);
    position:relative;
    z-index:70;
    transition: transform 320ms cubic-bezier(.2,.9,.2,1), opacity 250ms ease, visibility 0s linear 0s;
    transform-origin: top left;
    opacity:1;
    visibility: visible;
  }

  /* awal tertutup */
  .panel.hidden{
    transform: translateY(30px) scale(0.98);
    opacity:0;
    pointer-events:none;
    visibility: hidden;
  }

  /* panel naik + geser kanan saat muncul */
  .sidebar-wrap.active .panel{
    transform: translateY(-15px) translateX(50px);
  }

  .items{
    position:relative;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:var(--gap);
    padding:8px 0;
  }

  /* spotlight bulat putih kembali */
  .spotlight{
    position:absolute;
    left:50%;
    transform: translate(-50%, 0) scale(1);
    width:var(--spot-size);
    height:var(--spot-size);
    border-radius:50%;
    background:#ffffff;
    box-shadow: 0 10px 18px rgba(0,0,0,0.12);
    transition: 
      top 420ms cubic-bezier(.2,.9,.2,1),
      transform 420ms cubic-bezier(.2,.9,.2,1),
      opacity 250ms ease;
    pointer-events:none;
    z-index:75;
    opacity:0; /* tidak terlihat saat panel tertutup */
  }

  /* muncul saat panel aktif */
  .sidebar-wrap.active .spotlight{
    opacity:1;
  }

  .item{
    width:var(--spot-size);
    height:var(--spot-size);
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    background:transparent;
    cursor:pointer;
    border:none;
    z-index:76;
    transition: transform 260ms cubic-bezier(.2,.9,.2,1);
  }

  .item img{
    width:40px;
    height:40px;
    pointer-events:none;
    object-fit:contain;
  }

  .item.active{ transform:translateY(-6px); }

  .panel::before{
    content:"";
    position:absolute;
    left:-8px;
    top:-8px;
    width:calc(100% + 16px);
    height:56px;
    background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.00));
    border-top-left-radius:26px;
    border-top-right-radius:26px;
    pointer-events:none;
  }

  main{ margin-left:140px; padding:28px; }
</style>
</head>
<body>

<div class="sidebar-wrap" id="wrap">
  <!-- tombol CS -->
  <div id="capsule" class="capsule">
    <img src="assets/cs.png" alt="CS" style="height:26px;">
    <svg class="chev" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>

  <!-- panel logo -->
  <div id="panel" class="panel hidden">
    <div class="items" id="items">
      <div id="spotlight" class="spotlight"></div>

      <!-- pakai PNG dan arahkan ke file html -->
      <button class="item" data-target="profil.html"><img src="assets/user.png" alt="User"></button>
      <button class="item" data-target="random.html"><img src="assets/random.png" alt="Random"></button>
      <button class="item" data-target="plus.html"><img src="assets/plus.png" alt="Plus"></button>
      <button class="item" data-target="home.html"><img src="assets/home.png" alt="Home"></button>
      <button class="item" data-target="hanger.html"><img src="assets/hanger.png" alt="Hanger"></button>
      <button class="item" data-target="calendar.html"><img src="assets/calendar.png" alt="Calendar"></button>
    </div>
  </div>
</div>

<main>
  <h1>Final â€” Spotlight Putih Kembali ðŸŒ•</h1>
  <p>Panel awalnya tertutup, klik CS untuk buka. Spotlight bulat putih akan kembali muncul dan bergerak di belakang logo aktif.</p>
</main>

<script>
  const wrap = document.getElementById('wrap');
  const capsule = document.getElementById('capsule');
  const panel = document.getElementById('panel');
  const itemsContainer = document.getElementById('items');
  const spotlight = document.getElementById('spotlight');
  const items = Array.from(itemsContainer.querySelectorAll('.item'));

  let SPOT_SIZE = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--spot-size')) || 62;
  let open = false; // panel tertutup awal

  // fungsi pindah spotlight
  function moveSpotTo(index, animate=true){
    if(index < 0 || index >= items.length) return;
    const item = items[index];
    items.forEach(i=>i.classList.remove('active'));
    item.classList.add('active');

    const itemRect = item.getBoundingClientRect();
    const containerRect = itemsContainer.getBoundingClientRect();
    const centerY = (itemRect.top - containerRect.top) + (itemRect.height / 2);
    const newTop = centerY - (SPOT_SIZE / 2);

    if(animate){
      spotlight.style.transition = 'top 420ms cubic-bezier(.2,.9,.2,1), transform 420ms cubic-bezier(.2,.9,.2,1)';
      spotlight.style.transform = 'translate(-50%, 0) scale(0.9)';
      void spotlight.offsetWidth;
      spotlight.style.top = `${newTop}px`;
      setTimeout(()=> spotlight.style.transform='translate(-50%, 0) scale(1)',120);
    } else {
      spotlight.style.transition='none';
      spotlight.style.top=`${newTop}px`;
      spotlight.style.transform='translate(-50%, 0) scale(1)';
    }
  }

  // toggle buka/tutup panel
  function setOpenState(isOpen){
    open = !!isOpen;
    capsule.classList.toggle('open', open);
    wrap.classList.toggle('active', open);

    if(open){
      panel.classList.remove('hidden');
      setTimeout(()=> {
        moveSpotTo(0,false);
        spotlight.style.opacity = 1;
      }, 50);
    } else {
      spotlight.style.opacity = 0;
      panel.classList.add('hidden');
      items.forEach(i=>i.classList.remove('active'));
    }
  }

  // klik CS toggle
  capsule.addEventListener('click', () => setOpenState(!open));

  // klik logo -> pindah halaman
  items.forEach((btn, idx) => {
    btn.addEventListener('click', () => {
      const target = btn.dataset.target;
      moveSpotTo(idx, true);
      if(target){
        setTimeout(()=> window.location.href = target, 250);
      }
    });
  });

  // awal: panel tertutup
  window.addEventListener('load', () => {
    setOpenState(false);
    SPOT_SIZE = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--spot-size')) || SPOT_SIZE;
  });

  window.addEventListener('resize', () => {
    if(open){
      const activeIndex = items.findIndex(i=>i.classList.contains('active'));
      if(activeIndex>=0) moveSpotTo(activeIndex,false);
    }
  });

  document.addEventListener('keydown', (e) => { if(e.key === 'Escape') setOpenState(false); });
</script>

</body>
</html>
