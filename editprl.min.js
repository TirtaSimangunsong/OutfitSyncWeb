// @ts-nocheck
const avatarInput=document.getElementById("avatarInput"),avatarImg=document.getElementById("avatarPreviewImg"),editBadge=document.getElementById("editBadge"),swatches=document.querySelectorAll(".swatch");editBadge.addEventListener("click",(()=>avatarInput.click())),document.querySelector(".avatar-disk label").addEventListener("click",(()=>avatarInput.click())),avatarInput.addEventListener("change",(e=>{const t=e.target.files[0];if(!t||!t.type.startsWith("image/"))return alert("Pilih file gambar.");const a=new FileReader;a.onload=e=>{avatarImg.src=e.target.result,localStorage.setItem("profileAvatar",e.target.result)},a.readAsDataURL(t)}));const savedAvatar=localStorage.getItem("profileAvatar");function applyTheme(e){document.body.classList.remove("theme-pink","theme-blue"),"pink"===e?(document.body.classList.add("theme-pink"),document.documentElement.style.setProperty("--page-bg","#ffeef0")):(document.body.classList.add("theme-blue"),document.documentElement.style.setProperty("--page-bg","#dff3ff"))}function createToast(e,t=!1){const a=document.createElement("div");a.textContent=e,Object.assign(a.style,{position:"fixed",bottom:"32px",left:"50%",transform:"translateX(-50%)",padding:"10px 16px",borderRadius:"12px",boxShadow:"0 8px 30px rgba(0,0,0,0.12)",background:t?"#ffeef0":"white",color:t?"#b00020":"#111",zIndex:9999}),document.body.appendChild(a),setTimeout((()=>a.style.opacity="0"),900),setTimeout((()=>a.remove()),1200)}savedAvatar&&(avatarImg.src=savedAvatar),swatches.forEach((e=>{e.addEventListener("click",(()=>{swatches.forEach((e=>e.classList.remove("selected"))),e.classList.add("selected"),applyTheme(e.dataset.theme)}))})),applyTheme(document.querySelector(".swatch.selected").dataset.theme),document.getElementById("cancelBtn").addEventListener("click",(()=>{document.querySelector(".card").animate([{transform:"translateY(0)"},{transform:"translateY(-8px)"},{transform:"translateY(0)"}],{duration:300})})),document.getElementById("saveBtn").addEventListener("click",(()=>{document.querySelectorAll(".error").forEach((e=>e.style.display="none"));const e=document.getElementById("name").value.trim(),t=document.getElementById("gender").value,a=document.getElementById("birth").value,n=document.getElementById("email"),r=document.getElementById("phone").value.trim();let l=!0;if(e||(document.getElementById("err-name").style.display="block",l=!1),t||(document.getElementById("err-gender").style.display="block",l=!1),a||(document.getElementById("err-birth").style.display="block",l=!1),n.checkValidity()||(document.getElementById("err-email").style.display="block",l=!1),!l)return createToast("Lengkapi field yang wajib.",!0);localStorage.setItem("profileData",JSON.stringify({name:e,gender:t,birth:a,email:n.value.trim(),phone:r})),createToast("Profile saved (lokal)")}));const birthInput=document.getElementById("birth"),birthDisplay=document.getElementById("birthDisplay");birthInput.addEventListener("change",(()=>{if(!birthInput.value)return birthDisplay.textContent="";const e=new Date(birthInput.value+"T00:00:00");birthDisplay.textContent="Dipilih: "+e.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}));const savedProfile=localStorage.getItem("profileData");if(savedProfile){const e=JSON.parse(savedProfile);e.name&&(document.getElementById("name").value=e.name),e.gender&&(document.getElementById("gender").value=e.gender),e.birth&&(document.getElementById("birth").value=e.birth,birthInput.dispatchEvent(new Event("change"))),e.email&&(document.getElementById("email").value=e.email),e.phone&&(document.getElementById("phone").value=e.phone)}